<!DOCTYPE html>
<html>
  <head>
	  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Collaborative & Reproducible Workflows</title>
<meta name="description" content="Learn about git and GitHub.">
<link rel="canonical" href="https://sesync-ci.github.io/basic-git-lesson/class/archive.html">

	  <link rel="stylesheet" href="https://cdn.rawgit.com/sesync-ci/lesson-style/1.1/docs/css/static.css">
  </head>
  <body>
	  <div class="page-content">
	    <div class="wrapper">
        
        
<h1 style="text-transform: none;" id="collaborative--reproducible-workflows">Collaborative &amp; Reproducible Workflows</h1>

<p>Lesson 3 with <em>Ian Carroll</em></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#/slides/workflows">Workflows</a></li>
  <li><a href="#/slides/intro">Distributed Workflows</a></li>
  <li><a href="#/slides/goals">Objectives for this lesson</a></li>
  <li><a href="#/slides/reproducible">A Plug for Reproducible Research</a></li>
  <li><a href="#/slides/github">What’s a GitHub? What’s a “repo”?</a></li>
  <li><a href="#/slides/repo">Get Started with GitHub</a></li>
  <li><a href="#/slides/collab">Working with Collaborators</a></li>
  <li><a href="#/slides/readme">RStudio Projects</a></li>
  <li><a href="#/slides/save">Create a new file</a></li>
  <li><a href="#/slides/conclude">Where to from here?</a></li>
</ul>

<hr />

<p><a name="/slides/workflows"></a></p>

<h2 id="workflows">Workflows</h2>

<p>As your research project moves from conception, through data collection, modeling and analysis, to publishing and other forms of dissemination, it’s components can fracture, lose their development history, and – worst of all – become conflicted.</p>

<p>This lesson gives a high level overview of workflows to organize your project and introduces an accompanying software solution, <code class="highlighter-rouge">git</code>.</p>

<h2 id="workflow-diagram">Workflow diagram</h2>

<p class="captioned"><img src="/basic-git-lesson/images/rp-overview.jpg" alt="" width="60%" /><br />
<em>Credit: <a href="http://cacm.acm.org/blogs/blog-cacm/169199-data-science-workflow-overview-and-challenges">Philip Guo</a></em></p>

<h2 id="a-real-research-workflow">A real research workflow</h2>

<p>A professor at UC Berkeley, <a href="http://www.carlboettiger.info">Carl Boettiger</a>, is a strong advocate for open science who publishes clear &amp; reproducible workflows. The work leading up to <a href="http://github.com/cboettig/pdg_control">“Pretty Darn Good Control”</a> is on <a href="http://github.com">GitHub</a>, a website integrated with the <code class="highlighter-rouge">git</code> version control system.</p>

<p>Integrating <code class="highlighter-rouge">git</code> with cloud services like GitHub creates a complete system for project management, collaboration and sharing.</p>

<p class="ToS"><a href="#/slides/workflows">Top of Section</a></p>

<hr />

<p><a name="/slides/intro"></a></p>

<h2 style="color: #FFFFFF; font-weight: 500;" id="distributed-workflows">Distributed Workflows</h2>

<p class="on-white">A single collaboration model – the centralized workflow – dominates collaborative research.
There is a central hub, and everyone synchronizes their work to it.
A number of researchers are nodes – consumers of that hub – and synchronize to that one place.</p>

<p class="ToS"><a href="#/slides/intro">Top of Section</a></p>

<hr />

<p><a name="/slides/goals"></a></p>

<h2 id="objectives-for-this-lesson">Objectives for this lesson</h2>

<ul>
  <li>Learn about a framework for distributed workflows</li>
  <li>Identify attributes of reproducible research</li>
  <li>Use RStudio to begin managing a workflow</li>
</ul>

<h2 id="specific-achievements">Specific achievements</h2>

<ul>
  <li>Create a <code class="highlighter-rouge">git</code> repository on GitHub</li>
  <li>Make commits to a project file</li>
  <li>Synchronize to a repository with RStudio</li>
  <li>Collaborate with another GitHub user</li>
</ul>

<p class="ToS"><a href="#/slides/goals">Top of Section</a></p>

<hr />

<p><a name="/slides/reproducible"></a></p>

<h2 id="a-plug-for-reproducible-research">A Plug for Reproducible Research</h2>

<p>Reproducibility is a core tenent of the scientific method.
Experiments are reported in sufficient detail for a skilled practitioner to duplicate the result.</p>

<p class="fragment">Does the same principle apply to modeling and data analysis? <strong>You bet!</strong></p>

<h2 id="hallmarks-of-reproducible-research">Hallmarks of reproducible research:</h2>

<table>
  <tbody>
    <tr>
      <td><strong>Reviewable</strong></td>
      <td>All details of the method used are easily accessible for peer review and community review.</td>
    </tr>
    <tr>
      <td><strong>Auditable</strong></td>
      <td>Records exist to document how the methods and conclusions evolved, but may be private.</td>
    </tr>
    <tr>
      <td><strong>Replicable</strong></td>
      <td>Given sufficient resources, a skilled practitioner could duplicate the research without any guesswork.</td>
    </tr>
    <tr>
      <td><strong>Open</strong></td>
      <td>The orginator grants permissions for reuse and extension of the research products.</td>
    </tr>
  </tbody>
</table>

<h2 id="use-your-workflow-to-achieve-these-same-goals">Use your workflow to achieve these same goals:</h2>

<table>
  <tbody>
    <tr>
      <td><strong>Reviewable</strong></td>
      <td>Write-ups and thoroughly-commented scripts shared among collaborators</td>
    </tr>
    <tr>
      <td><strong>Auditable</strong></td>
      <td>Versioned project history, used to revert mistakes when necessary</td>
    </tr>
    <tr>
      <td><strong>Replicable</strong></td>
      <td>“One-click” file &amp; data sharing, as well as streamlined recreation of analyses</td>
    </tr>
    <tr>
      <td><strong>Open</strong></td>
      <td>GitHub (or similar) based centralized workflow</td>
    </tr>
  </tbody>
</table>

<p class="ToS"><a href="#/slides/reproducible">Top of Section</a></p>

<hr />

<p><a name="/slides/github"></a></p>

<h2 id="whats-a-github-whats-a-repo">What’s a GitHub? What’s a “repo”?</h2>

<p>Open up the <a href="https://github.com/SESYNC-ci/handouts" target="_blank">repository</a> that provides the “handouts” for this workshop.</p>

<ul>
  <li><code class="highlighter-rouge">README.md</code> is a Markdown file giving basic information about the repository.</li>
  <li>There is a list of files, including a folder for data.</li>
  <li>You are looking at a branch called <code class="highlighter-rouge">master</code>.</li>
  <li>The commit history is available from the top bar.</li>
  <li>The “Clone or download” button provides a URL.</li>
</ul>

<h2 id="centralized-workflow">Centralized Workflow</h2>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_workflow.svg" alt="" width="50%" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>The <strong>origin</strong> is the central repository, in this case it lives on GitHub. Every member of the team gets a <strong>local</strong> copy of the entire project, called a <strong>clone</strong>.</p>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_pull.svg" alt="" width="50%" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>Cloning is the initial <strong>pull</strong> of the entire project and all its history. In general, a worker <strong>pulls</strong> the work of other teammates from the <strong>origin</strong> when ready to incorporate their work, and she <strong>pushes</strong> updates to the <strong>origin</strong> when ready to contribute work of her own work.</p>

<p>A commit is a unit of work: any collection of changes to one or more files in the repository.
A versioned project is like a tree of commits, although the current tree has just one <strong>branch</strong>.
After a worker creates a <strong>clone</strong>, the local copy is in the same place as the <strong>origin</strong>.</p>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_clone.png" alt="" width="30%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>A <strong>pull</strong>, or initially a <strong>clone</strong>, applies commits copied from the <strong>origin</strong> to your local repo, syncing them up.</p>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_after_pull_top.png" alt="" width="40%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>A <strong>pull</strong>, or initially a <strong>clone</strong>, applies commits copied from the <strong>origin</strong> to your local repo, syncing them up.</p>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_after_pull_bottom.png" alt="" width="40%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>A <strong>push</strong> copies local commits to the <strong>origin</strong> and applies them remotely.</p>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_after_push_top.png" alt="" width="40%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>A <strong>push</strong> copies local commits to the <strong>origin</strong> and applies them remotely.</p>

<p class="captioned"><img src="/basic-git-lesson/images/atlassian_after_push_bottom.png" alt="" width="40%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p class="ToS"><a href="#/slides/github">Top of Section</a></p>

<hr />

<p><a name="/slides/repo"></a></p>

<h2 id="get-started-with-github">Get Started with GitHub</h2>

<p>Sign in or create a GitHub account.</p>

<h2 id="create-a-github-repository">Create a GitHub repository</h2>

<p>Create a new repository on your GitHub page, name it whatever you like, but do check the box to create a “README”.</p>

<p class="captioned"><img src="/basic-git-lesson/images/new_repo.png" alt="" width="60%" /></p>

<p>Once it’s created, find the “Clone or download” URL beginning with “https://”. We’ll need that later.</p>

<h2 id="readmemd">README.md</h2>

<p>To begin making this project your own, modify the README. Tell us something about why you’re here!</p>

<div class="text-document highlighter-rouge" title="README.md"><pre class="highlight"><code># SESYNC Spatial ABM Course

Goals

- Learn to build Spatial ABMs!
</code></pre>
</div>

<p>The “.md” extension stands for “markdown”, which is a syntax for simple plain text “formatting”. Add a commit message when you save.</p>

<p class="ToS"><a href="#/slides/repo">Top of Section</a></p>

<hr />

<p><a name="/slides/collab"></a></p>

<h2 id="working-with-collaborators">Working with Collaborators</h2>

<p>True collaboration goes deeper than commenting on a final report, but integrated work on a project from start to finish raises workflow challenges.</p>

<ul>
  <li>Be it data, a script, or a write-up, who has the most up-to-date version?</li>
  <li>Will a teammate’s work overwrite any of your own?</li>
  <li>How do I recover the working version of code the PI broke?</li>
</ul>

<p>A centralized workflow, managed by <code class="highlighter-rouge">git</code>, helps answer these questions.</p>

<h2 id="centralized-workflow">Centralized Workflow</h2>

<ul>
  <li>The <strong>origin</strong> becomes the official up-to-date repo, <em>even</em> if your work is a few commits ahead.</li>
  <li>Diverging projects are easily reintegrated with a <strong>merge</strong> algorithm.</li>
  <li>The complete project history is available to <strong>checkout</strong>.</li>
</ul>

<p>Note, version control works really well with text. Non-textual components of your project (e.g. spatial data) need advanced treatment.</p>

<p>The first step to collaborative workflows is granting access to the <strong>origin</strong> of your project.</p>

<p>Introduce yourself to your neighbour, and ask for his/her GitHub username.</p>

<p class="captioned"><img src="/basic-git-lesson/images/repo_collab.png" alt="" /></p>

<p>Add your neighbour as a collaborator, and accept your neighbours invitation to collaborate!</p>

<h2 id="editing-on-github">Editing on GitHub</h2>

<p>Edit the README.md from your neighbour’s repo, by adding more goals to their README.</p>

<div class="text-document highlighter-rouge" title="README.md"><pre class="highlight"><code># SESYNC Spatial ABMs Course

Goals

- Learn to build Spatial ABMs!
- Work with a team.

</code></pre>
</div>

<p>Always write a meaningful commit message when you save!</p>

<p class="ToS"><a href="#/slides/collab">Top of Section</a></p>

<hr />

<p><a name="/slides/readme"></a></p>

<h2 id="rstudio-projects">RStudio Projects</h2>

<p>This software is an example of an <em>integrated development environment</em> and focuses on</p>

<ol>
  <li>Editing scripts written in the R language.</li>
  <li>Running R language commands or programs in the R interpreter.</li>
  <li>Helping to manage many components of a collaborative project using version control.</li>
</ol>

<h2 id="integration-with-git">Integration with <code class="highlighter-rouge">git</code></h2>

<p>RStudio provides convenient access to the core tools provided by <code class="highlighter-rouge">git</code>, so any project can also be a repository.</p>

<p>Under the File menu, create a new project from a remote version control repository.</p>

<p><img src="/basic-git-lesson/images/new_project.png" alt="" /></p>

<h2 id="files-under-version-control">Files under version control</h2>

<p>Software is written in plain text, and version control is design for software development. A scripted workflow relies heavilly on plain text files, but may include different file types for figures or data.</p>

<p>For this reason, a plain text editor is a core element of the IDE. The editor in RStudio is good for any kind of text documents: you could edit R scripts, NetLogo models, LaTeX documents, or even CSV files.</p>

<h2 id="configure-git">Configure git</h2>

<p>The <code class="highlighter-rouge">system</code> function sends a given string directly to the operating system, which uses the <code class="highlighter-rouge">git</code> program itself to do something we can’t do through RStudio.</p>

<div class="input highlighter-rouge"><pre class="highlight"><code>system("git config user.name '&lt;Full Name&gt;'")
system("git config user.email '&lt;email&gt;'")
</code></pre>
</div>

<p class="ToS"><a href="#/slides/readme">Top of Section</a></p>

<hr />

<p><a name="/slides/save"></a></p>

<h2 id="create-a-new-file">Create a new file</h2>

<p>Copy the <code class="highlighter-rouge">.nlogo</code> file saved from the NetLogo Programming lesson into this directory:</p>

<div class="text-document highlighter-rouge" title="model.nlogo"><pre class="highlight"><code>turtles-own [energy]

...

@#$#@#$#@
GRAPHICS-WINDOW
</code></pre>
</div>

<h2 id="track-it-with-git">Track it with git</h2>

<p>Before you can commit changes involving a new file, you have to tell the version control system (that’s <code class="highlighter-rouge">git</code>!) to watch it..</p>

<ol>
  <li>Go to the <code class="highlighter-rouge">git</code> tab in RStudio</li>
  <li>Select <code class="highlighter-rouge">commit</code> to open the “Review Changes” window</li>
  <li>Select “Staged” to add (hence “A”) the new file.</li>
  <li>Enter a descriptive message about the commit.</li>
  <li>Commit!</li>
</ol>

<h2 id="push">Push</h2>

<p>Open the “Review Changes” window again and notice that your branch is ahead of origin/master! Push those commit(s) to your GitHub repo.</p>

<h2 id="challenge">Challenge</h2>

<ol>
  <li>Enter a description into the “WHAT IS IT?” section of the NetLogo model.</li>
  <li>Commit and push your work.</li>
  <li>Now create a new RStudio project from your neighbour’s repository.</li>
  <li>Add a comment to explain what part of the code does.</li>
  <li>Commit and push your work.</li>
</ol>

<p class="ToS"><a href="#/slides/save">Top of Section</a></p>

<hr />

<p><a name="/slides/conclude"></a></p>

<h2 id="where-to-from-here">Where to from here?</h2>

<p>The repository you created is an example of the heart of a distributed workflow. Putting the <strong>origin</strong> of your project on GitHub (or similar) will make it accessible not only by your collaborators, but also availabe for review and extension by your research community.</p>

<p>Sharing project files, including managing multiple “copies” during development or at public release, in a hub-and-spokes workflow is a streamlined <strong>cloning</strong> process. The <strong>origin</strong> always has the “most recent” version of any documents: conflicts must be resolved in the local clone before new commits can be shared.</p>

<p>Using advanced <code class="highlighter-rouge">git</code> to manage contributions to the project as a branching and merging “tree” of commits accomplishes two objectives. First, work can safely proceed in parallel, even on the same documents. Second, a recoverable (and auditable) trail of changes is immediately available in the project history.</p>

<p class="ToS"><a href="#/slides/conclude">Top of Section</a></p>

<hr />



	    </div>
	  </div>
  </body>
</html>
