---
---

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Collaborative & Reproducible Research</title>
<meta name="description" content="Learn to use git with GitHub in RStudio.">
<link rel="canonical"
      href="https://SESYNC-ci.github.io/basic-git-lesson/2021/07/19/index.html">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SESYNC-ci/lesson-style@3.0/docs/assets/css/default.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SESYNC-ci/lesson-style@3.0/docs/assets/css/syntax.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SESYNC-ci/lesson-style@3.0/docs/assets/css/static.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      rel="stylesheet"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous">

    
  </head>
  <body>
    <div class="page-content">
      <div class="wrapper">
        

<h1 style="text-transform: none;" id="collaborative--reproducible-research">Collaborative &amp; Reproducible Research</h1>

<p>Lesson 3 with <em>Quentin Read</em></p>

<nav id="ToC">

  <ul>
    <li><a href="#/slides/intro">Collaboration &amp; Code</a></li>
    <li><a href="#/slides/goals">Lesson Objectives</a></li>
    <li><a href="#/slides/pipelines">Reproducible Pipeline</a></li>
    <li><a href="#/slides/config">RStudio + git</a></li>
    <li><a href="#/slides/terms">Syncing Repos</a></li>
    <li><a href="#/slides/collab">Collaborators</a></li>
    <li><a href="#/slides/paths">What about Data?</a></li>
    <li><a href="#/slides/reproducible">A Plug for Reproducibility</a></li>
    <li><a href="#/slides/conclude">Future Directions</a></li>
    <li><a href="#/slides/exercises">Exercises</a></li>
  </ul>
</nav>

<hr />
<p><a name="/slides/intro"></a></p>

<section><h2 id="collaboration--code">Collaboration &amp; Code</h2>

<p class="notes">As your research project moves from conception, through data collection,
modeling and analysis, to publishing and other forms of dissemination, its
components can fracture, lose their development history, and‚Äîworst of
all‚Äîbecome conflicted or lost. This lesson introduces strategies for
structuring your collaboration, focusing on the core principle of ‚Äúversion
control‚Äù (VC) and the related software and cloud solutions. The main objective is to
demonstrate that version control is much more than history, it is
a way for distributed teams to work efficiently on a shared codebase. Version
control is essential for reproducible research.</p>

<p class="on-white">A cloud <strong>hub</strong> stores project files and their history. Researchers are spokes
on the wheel, each working on a local <strong>repository</strong>. Project integrity is
maintained by rules for synchronizing <strong>commits</strong> between the hub and spokes
when users execute a <strong>push</strong> or <strong>pull</strong>.</p>
</section>

<p class="ToS"><a href="#/slides/intro">Top of Section</a></p>

<hr />
<p><a name="/slides/goals"></a></p>

<section><h3 id="lesson-objectives">Lesson Objectives</h3>

<p class="notes">By cultivating new habits for scripting, documenting, and committing, much of the
research cycle can be made reproducible.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/rp-overview.jpg" alt="" /><br />
<em>Credit: <a href="http://cacm.acm.org/blogs/blog-cacm/169199-data-science-workflow-overview-and-challenges">Philip Guo</a></em></p>

</section>

<section>

<ul>
  <li>Learn about software repositories</li>
  <li>See that VC equals efficient communication</li>
  <li>Identify attributes of reproducible research</li>
  <li>See how RStudio + git facilitate collaboration</li>
</ul>

</section>

<section>

<h3 id="specific-achievements">Specific Achievements</h3>

<ul>
  <li>Make ‚Äúcommits‚Äù to a repository with git</li>
  <li>‚ÄúPush‚Äù and ‚Äúpull‚Äù project work to GitHub</li>
  <li>‚ÄúMerge‚Äù your work with a collaborator‚Äôs via GitHub</li>
</ul>
</section>

<p class="ToS"><a href="#/slides/goals">Top of Section</a></p>

<hr />
<p><a name="/slides/pipelines"></a></p>

<section><h2 id="reproducible-pipeline">Reproducible Pipeline</h2>

<p>The result of reproducible research is more than a published paper. It includes
the whole data-to-document <strong>pipeline</strong>. In a typical socio-environmental
synthesis project, a finished pipeline ideally includes the following steps:</p>

</section>

<section>

<ol>
  <li>Acquire raw data from online repository.</li>
  <li>Extract, transform, and load data into storage for analysis.</li>
  <li>Perform data analysis (e.g. model inference) and visualization.</li>
  <li>Update documentation and reports.</li>
  <li>Publish results, including reports, data and code/software.</li>
</ol>

</section>

<section>

<p>The pipeline is a direct path through the research cycle, avoiding all its twists
and turns, so others may reproduce your final analysis.</p>

</section>

<section>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/rp-overview-pipe.jpg.svg" alt="" width="80%" /><br />
<em>Credit: <a href="http://cacm.acm.org/blogs/blog-cacm/169199-data-science-workflow-overview-and-challenges">Philip Guo</a></em></p>

<p class="notes">A UC Berkeley professor who is a strong advocate for open science, <a href="http://www.carlboettiger.info">Carl
Boettiger</a>, has released several reproducible
pipelines on <a href="http://github.com/cboettig">GitHub</a>. For example, check out his
work leading up to the paper <a href="https://doi.org/10.1890/15-0236">‚ÄúPretty Darn Good
Control‚Äù</a> in the project
<a href="http://github.com/cboettig/pdg_control">pdg_control</a>.</p>
</section>

<p class="ToS"><a href="#/slides/pipelines">Top of Section</a></p>

<hr />
<p><a name="/slides/config"></a></p>

<section><h2 id="rstudio--git">RStudio + git</h2>

<p class="notes"><em>Note</em>: The rest of this lesson walks you through basic git actions with RStudio.
If you are a Python user, check out the abbreviated version of the <a href="https://cyberhelp.sesync.org/basic-git-lesson/git_and_jupyterlab.html">basic git lesson with JupyterLab</a>. 
SESYNC‚Äôs JupyterLab server has the <a href="https://github.com/jupyterlab/jupyterlab-git#readme">JupyterLab git extension</a> 
installed to make it easy for you to work with git-versioned Python code in Jupyter.</p>

<p>In RStudio, open the <code class="language-plaintext highlighter-rouge">handouts</code> directory that you unzipped from this lesson‚Äôs <code class="language-plaintext highlighter-rouge">handouts.zip</code> file. 
(If you are participating in the Summer Institute, instead login to RStudio on <a href="https://lab.sesync.org">lab.sesync.org</a>, 
and <code class="language-plaintext highlighter-rouge">handouts.zip</code> will already be uploaded for you.) Click on <code class="language-plaintext highlighter-rouge">handouts/handouts.Rproj</code> to open the directory as a project.</p>

<p class="notes">RStudio provides a GUI (a point-and-click interface) to the core tools provided by git. 
Every folder that contains a ‚Äú*.Rproj‚Äù file is an RStudio project (simply a collection of files
and configuration settings). We use <code class="language-plaintext highlighter-rouge">git</code> to turn our project into a
‚Äúrepository,‚Äù or ‚Äúrepo‚Äù for short, a term from the software development community that encompasses a
project along with its development history. On your local machine, the repository 
simply appears as a folder with project-associated files. <code class="language-plaintext highlighter-rouge">git</code> tracks the history
of the changes you and collaborators have made to the project files over time.</p>

</section>

<section>

<h3 id="note-on-terminology-and-configuration">Note on terminology and configuration</h3>

<p class="notes">As of October 1, 2020, all new repositories created on GitHub will have a default branch
called <code class="language-plaintext highlighter-rouge">main</code>. Previously, the default name was <code class="language-plaintext highlighter-rouge">master</code>. The <a href="https://github.com/github/renaming">change</a> was
made to promote inclusive language in the version control world. SESYNC has updated 
the GitLab and teaching lab servers to match this new default. However, the git client that is running
on the SESYNC RStudio server still defaults to <code class="language-plaintext highlighter-rouge">master</code> if you create a repository locally, 
unless you configure it as described below.
You should also be aware that any code, documentation, tutorial, or StackOverflow
post written before 2020 will assume your default branch is called <code class="language-plaintext highlighter-rouge">master</code>.</p>

<p>If you are doing this lesson on your local machine, we recommend setting the
default branch name for new repositories you create to <code class="language-plaintext highlighter-rouge">main</code>. Enter the
following into your terminal prompt. You can access the prompt from RStudio‚Äôs
Terminal tab.</p>

<div class="language-bash text-document highlighter-rouge" title="worksheet-3.sh"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> init.defaultBranch main
</code></pre></div></div>

<p>This option is available for git version 2.28 or later.</p>

</section>

<section>

<h3 id="initialize-git">Initialize git</h3>

<p>Convert your RStudio project to a git repository by enabling version control,
available from the menu bar under ‚ÄúTools‚Äù &gt; ‚ÄúVersion Control‚Äù &gt; ‚ÄúProject Setup‚Äù.</p>

</section>

<section>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/git-init.png" alt="" width="60%" /></p>

<p class="notes">Adding a git repository creates a hidden folder in your project called <code class="language-plaintext highlighter-rouge">.git</code>,
storing all the data about your project‚Äôs current and past states.</p>

</section>

<section>

<h3 id="commit">Commit</h3>

<p>Once RStudio refreshes your project, there will be a ‚ÄúGit‚Äù tab in the same
window as the Environment tab. The window shows files that have content not
already committed in the current state of your project. At first, this
will be every file in the directory, because you created a blank repository.
Choose ‚ÄúCommit‚Äù to open a new window for easy staging and committing.</p>

</section>

<section>

<ol>
  <li>check <code class="language-plaintext highlighter-rouge">README.md</code> and <code class="language-plaintext highlighter-rouge">handouts.Rproj</code></li>
  <li>write a short and informative (&lt;50 characters) commit message</li>
  <li>commit</li>
</ol>

<p><strong>You will get an error message!</strong> Read on to resolve it.</p>

</section>

<section>

<p>For <a href="https://github.com">GitHub</a> to associate commits with your account, 
configure git with your GitHub username and email address. 
(If you don‚Äôt have a GitHub user account yet, sign up for one now.)</p>

<div class="language-bash text-document highlighter-rouge" title="worksheet-3.sh"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> user.name jdoe
git config <span class="nt">--global</span> user.email jdoe@sesync.org
</code></pre></div></div>

<p class="notes">When you set up your GitHub user account, in addition to selecting a 
username and password, you will also need to <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">create a personal access token</a>.
Because of security concerns, GitHub is making it mandatory to use either SSH
authentication or a personal access token when you do things like push from
a local repo to a remote repo on GitHub. Follow the instructions to create your
token given in the link above. When you are prompted to select the scopes 
(permissions) to give the token, check the box marked <code class="language-plaintext highlighter-rouge">repo</code>. When the token
is generated, copy it and save it in a safe place; you will need it in a moment.</p>

</section>

<section>

<p>Configure your username and email address by entering the <code class="language-plaintext highlighter-rouge">git config</code> 
commands into RStudio‚Äôs Terminal window. 
After configuring your username and email address, return to the Commit
window and commit your changes.</p>

</section>

<section>

<p class="notes">Now, author information will be associated with the commit.
In the future, configure your <code class="language-plaintext highlighter-rouge">user.name</code> and
<code class="language-plaintext highlighter-rouge">user.email</code> before starting a project. 
This is a one-time configuration for each computer on which you use
RStudio, so you don‚Äôt have to repeat this for any subsequent repositories you
create on this machine.</p>

<p class="notes">Saving, staging, and commiting are each separate steps, none of which imply any
of the others. This may seem like a hassle, but is a good thing! As your project
grows larger, you will frequently save changes you don‚Äôt want to commit: staging
lets you choose what changes get packaged into a commit.</p>

<h3 id="history">History</h3>

<p>The history of your project shows a single commit. Every new commit will be
chained on top of a preceding commit.</p>

</section>

<section>

<h3 id="create-the-hub">Create the Hub</h3>

<p>Sign in on <a href="https://github.com">GitHub</a>, then create an empty
repository.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/new_repo-1.png" alt="" width="50%" /></p>

</section>

<section>

<ol>
  <li>Give your repository the same name as your RStudio project.</li>
  <li>Add a short ‚Äútag line‚Äù about your workshop experience.</li>
  <li><strong>Do not check the ‚ÄúInitialize this repository with a README‚Äù box.</strong></li>
</ol>

</section>

<section>

<p>You have created a repository that has no history‚Äîit will accept the commits
made in RStudio without conflict. The quick start information provided by GitHub
explains how to finish configuration of your local git repo. Copy 
the code under ‚Äú‚Ä¶or push an existing repository from the command line‚Äù and paste
it into the RStudio Terminal window.</p>

<p class="notes">Make sure that <code class="language-plaintext highlighter-rouge">HTTPS</code> is selected, not <code class="language-plaintext highlighter-rouge">SSH</code>, at the top of the page, or you‚Äôll
get the wrong code to copy. Also, the line <code class="language-plaintext highlighter-rouge">git branch -M main</code> is unnecessary if you already configured
the default branch to be called <code class="language-plaintext highlighter-rouge">main</code> locally.</p>

<div class="language-bash text-document highlighter-rouge" title="Console"><div class="highlight"><pre class="highlight"><code>git remote add origin https://github.com/jdoe/handouts.git
git push <span class="nt">-u</span> origin main
</code></pre></div></div>

<p class="notes">Here, you are prompted to enter your username and password. <strong>Instead of typing in your
password, type or paste your GitHub <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">personal access token</a> that you created earlier.</strong>
On Unix-based operating systems, you don‚Äôt see asterisks appearing when you
enter the token, but don‚Äôt worry, it‚Äôs there! After this first push,
you will no longer need to use the terminal to push changes. 
You can use the RStudio dropdown menu to both commit and push changes, and
you won‚Äôt have to enter the token each time.</p>

</section>

<section>

<p>Go back to your GitHub account and check out your ‚Äúhub‚Äù.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">README.md</code> is a Markdown file giving basic information about the repository.</li>
  <li>There is a list of files, including a folder for data.</li>
  <li>You are looking at a branch called <code class="language-plaintext highlighter-rouge">main</code>.</li>
  <li>The commit history is available from the top bar.</li>
  <li>The ‚ÄúCode‚Äù button provides a URL for collaborators to clone the repo.</li>
</ul>

<p class="notes">In addition to being the center point for sharing commits with collaborators,
GitHub is a rich platform for managing projects and inspecting the history.</p>

</section>

<p class="ToS"><a href="#/slides/config">Top of Section</a></p>

<hr />
<p><a name="/slides/terms"></a></p>

<section><h2 id="syncing-repos">Syncing Repos</h2>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_workflow.svg" alt="" width="60%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>The <strong>origin</strong> is the central repository; in this case it lives on GitHub. Every member of the team gets a <strong>local</strong> copy of the entire project, called a <strong>clone</strong>.</p>

</section>

<section>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_pull.svg" alt="" width="50%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p>Cloning is the initial <strong>pull</strong> of the entire project and all its history. In general, a worker <strong>pulls</strong> the work of other teammates from the <strong>origin</strong> when ready to incorporate their work, and she <strong>pushes</strong> updates to the <strong>origin</strong> when ready to contribute her own work.</p>

</section>

<section>

<p>A git repository is a network of commits, although the current network is a tree
with no splits. After a worker creates a <strong>clone</strong>, the local repo is
in the same state as the <strong>origin</strong>.</p>

<p class="notes">Notice that the local and remote (origin) repos are both on a branch called <em>main</em> in the diagram
below. This is the default name given to the primary version of the repository.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_clone.png" alt="" width="40%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

</section>

<section>

<p>When the origin has commits that do not exist in the local repo, it has gotten ahead and a <strong>pull</strong> is required to synchronize state.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_after_pull_top.png" alt="" width="55%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

</section>

<section>

<p>A <strong>pull</strong>, or initially a <strong>clone</strong>, applies commits copied from the <strong>origin</strong>
to your local repo, as if you had created identical commits locally.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_after_pull_bottom.png" alt="" width="60%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

</section>

<section>

<p>In the opposite situation, commits created locally are not immediately
synchronized to the <strong>origin</strong>.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_after_push_top.png" alt="" width="60%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

</section>

<section>

<p>A <strong>push</strong> copies local commits to the <strong>origin</strong> and applies them remotely.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_after_push_bottom.png" alt="" width="60%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/syncing/git-pull">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

</section>

<section>

<p>An essential component of version control is the ability to merge
commit histories that have diverged.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_before_merge.png" alt="" width="60%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p class="notes">The commit graph splits any time different commits are applied to the same
‚Äúparent‚Äù commit. Automatic merging done by git integrates the changes from both
into a new ‚Äúmerge commit,‚Äù unsplitting the commit graph.</p>

</section>

<section>

<p>The <strong>origin</strong> will not accept a push that requires merging. In order to
preserve integrity, the contributor is always responsible for overseeing the
merge on a local <strong>clone</strong>.</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/atlassian_after_merge.png" alt="" width="70%" style="border: none; box-shadow: none;" /><br />
<em><a href="https://www.atlassian.com/git/tutorials/">Image</a> by Atlassian / <a href="http://creativecommons.org/licenses/by/2.5/au/">CC BY</a></em></p>

<p class="notes">After the merge commit has been created locally, the same situation now exists that
was depicted above. The conflict has been resolved and the origin will now accept 
a <strong>push</strong>.</p>

</section>

<p class="ToS"><a href="#/slides/terms">Top of Section</a></p>

<hr />
<p><a name="/slides/collab"></a></p>

<section><h2 id="collaborators">Collaborators</h2>

<p class="notes">Collaboration that goes beyond commenting on a final report‚Äîintegrated work on
a project from start to finish‚Äîraises serious challenges. Distributed
repositories, managed by git, help to answer these questions.</p>

<ul>
  <li>Data, script, or report: who has the latest version?</li>
  <li>Will a collaborator‚Äôs work erase or break your own?</li>
  <li>How can you recover a working version of a pipeline?</li>
</ul>

</section>

<section>

<h3 id="project-integrity">Project Integrity</h3>

<ul>
  <li>The origin becomes the official ‚Äúlatest‚Äù version, even if <em>your</em> work is a
few commits ahead.</li>
  <li>Diverging files are usually automatically merged by git.</li>
  <li>Manual re-integration is aided by the ability to ‚Äúcheckout‚Äù the project at any
commit.</li>
</ul>

<p class="notes">Version control software works well with text files. Large, non-text
components of your project (e.g., very big or binary data files) can slow down
any cloning, merging or branch switching. For that reason, data rarely live in a
repository with code. Keeping data and code separate also facilitates data
reuse‚Äîit‚Äôs not tied to one pipeline.</p>

</section>

<section>

<p>Add a section where you can list collaborators to the <code class="language-plaintext highlighter-rouge">README.md</code> file. Our aim is
to let your collaborators update this list with their own name, so only include
yourself. You can use any text editor, and RStudio‚Äôs is quite handy.</p>

<div class="language-plaintext text-document no-eval highlighter-rouge" title="README.md"><div class="highlight"><pre class="highlight"><code>## Collaborators

- J. Doe
</code></pre></div></div>

</section>

<section>

<h3 id="stage">Stage</h3>

<p>Before you can commit changes involving a new file, you have to tell git which
modifications you want to commit by staging.</p>

<ol>
  <li>Go to the ‚ÄúGit‚Äù tab in RStudio.</li>
  <li>Select ‚ÄúCommit‚Äù to open the ‚ÄúReview Changes‚Äù window.</li>
  <li>Select ‚ÄúStaged‚Äù to add modifications (hence ‚ÄúM‚Äù) by ‚ÄúREADME.md‚Äù.</li>
</ol>

</section>

<section>

<h3 id="commit">Commit</h3>

<ol>
  <li>Enter a brief (&lt;50 characters) descriptive message about the commit.</li>
  <li>Commit!</li>
  <li>Close the ‚ÄúReview Changes‚Äù window.</li>
</ol>

</section>

<section>

<h3 id="push">Push</h3>

<p>Look at the ‚ÄúGit‚Äù tab again and notice that your branch is ‚Äúahead of
origin/main‚Äù. Push the commit to your GitHub repo.</p>

<p class="notes">If you view the ‚ÄúHistory‚Äù tab you can now see that the local repo and
the remote repo have an identical state.</p>

</section>

<section>

<h3 id="github-collaborators">GitHub Collaborators</h3>

<p>Even on public GitHub repos, only the owner has ‚Äúpush access‚Äù by default. The
owner can allow any other GitHub user to push by inviting collaborators under
the settings tab (Settings &gt; Manage access &gt; Invite a collaborator).</p>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/repo_collab.png" alt="" /></p>

</section>

<section>

<p>Choose a partner for this exercise and split the two roles below between
you. Be sure to watch each other perform the steps assigned to your individual
roles, either in person or by screen sharing.</p>

<ol>
  <li>Owner: add your partner as a collaborator.</li>
  <li>Collaborator: accept your partner‚Äôs emailed invitation.</li>
</ol>

</section>

<section>

<h3 id="create-a-second-spoke">Create a Second Spoke</h3>

<p>The <strong>Collaborator</strong> now needs to create a new project in RStudio by cloning the
<strong>Owner‚Äôs</strong> project. Under the ‚ÄúFile‚Äù menu item, choose to create a New Project,
and then choose ‚ÄúVersion Control‚Äù.</p>

<p class="notes">You cannot use the same name for two project folders! The <strong>Collaborator</strong>
should choose a different name for their copy of the <strong>Owner‚Äôs</strong> project.</p>

</section>

<section>

<p class="captioned"><img src="https://cdn.jsdelivr.net/gh/SESYNC-ci/basic-git-lesson@v0.7/docs/assets/images/new_project.png" alt="" /></p>

</section>

<section>

<h3 id="push--pull">Push &amp; Pull</h3>

<ol>
  <li>Collaborator: Add your name to the list in the ‚ÄúREADME.md‚Äù.</li>
  <li>Collaborator: Stage, commit, and push (up arrow) your modifications.</li>
  <li>Owner: Pull (down arrow) to apply your neighbor‚Äôs commit.</li>
</ol>

<p class="notes">If you view the ‚ÄúHistory‚Äù tab, you can see that both the remote and
local repo are both updated with a record of the changes made by
both collaborators!</p>

</section>

<section>

<h3 id="merge">Merge</h3>

<p class="notes">In the previous example, everything happened in sequence. First the owner committed
and pushed, then the collaborator pulled, committed, and pushed, then the owner
pulled again. Each time, changes were made to the most recent ‚Äúofficial‚Äù version
of the repo, so there were no conflicts. However, if two collaborators make 
changes to the same line of the same file at the same time, git does not know automatically 
which version to use. However, you can use <code class="language-plaintext highlighter-rouge">git</code> to help resolve the conflict because it
identifies exactly where the conflicts are so that you can fix them.</p>

<p>You both realize it would have been good to include your affiliation along with
your name. Do you need to circulate ‚ÄúREADME.md‚Äù to each collaborator in sequence
for an update? No!</p>

<ol>
  <li>Ower <strong>AND</strong> Collaborator: edit your entry in <code class="language-plaintext highlighter-rouge">README.md</code>.</li>
  <li>Ower <strong>AND</strong> Collaborator: stage, commit, &amp; push.</li>
  <li>Owner <strong>OR</strong> Collaborator: if you receive an error message, it tells you
exactly what to do.</li>
</ol>

</section>

<section>

<p>If you receive the merge conflict message, first pull your collaborator‚Äôs change
from the remote repo. Then, open <code class="language-plaintext highlighter-rouge">README.md</code> and you will see that
<code class="language-plaintext highlighter-rouge">git</code> has put some markers into the file to indicate where the conflict is. Each
of the two possible versions appear in the file, one after the other.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
- John Doe (SESYNC)
- Jane Roe
=======
- John Doe
- Jane Roe (State U.)
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 17a88283234fe8cda436b
</code></pre></div></div>

<p class="notes">You can also see that the file is conflicted in the Commit window because it 
now has an orange ‚ÄúU‚Äù next to it, for ‚Äúunresolved.‚Äù</p>

</section>

<section>

<p>Resolve the conflict by deleting the parts of the conflicted section that 
you do not want to keep. Then delete all the conflict markers. Now, if you 
click on the checkbox for <code class="language-plaintext highlighter-rouge">README.md</code> in the Commit window, the ‚ÄúU‚Äù will
change to an ‚ÄúM‚Äù and you should be able to commit and push without error.</p>

<p class="notes">After you successfully complete a merge, move back to your own ‚Äúhandouts‚Äù project
in RStudio to access your own worksheets.</p>

<p class="notes"><em>Important note</em>: If you find resolving merge conflicts confusing, the best
way to avoid them is to <strong>pull before you push</strong>! That means always pull the 
most recent version of the repo from the remote before making changes. That way,
merge conflicts will only occur if you and your collaborator(s) are working on
the code at the exact same time.</p>
</section>

<p class="ToS"><a href="#/slides/collab">Top of Section</a></p>

<hr />
<p><a name="/slides/paths"></a></p>

<section><h2 id="what-about-data">What about Data?</h2>

<p>The scripts executed in your pipeline are plain text files, but the project
may need other assets, such as data, figures, or private configurations.</p>

<ul>
  <li>Non-text files get little benefit from <code class="language-plaintext highlighter-rouge">git</code>, and have large costs.</li>
  <li>Large data files should not be version controlled by <code class="language-plaintext highlighter-rouge">git</code> and usually live outside the repo (as an ‚Äúintegration‚Äù).</li>
  <li>Private information (e.g., personal data) should not be committed to a public repository.</li>
</ul>

</section>

<section>

<h2 id="external-data">External Data</h2>

<p>The most common pipeline integration is shared data storage.</p>

<ul>
  <li>Local area network file share (e.g. ‚ÄúZ:\\‚Ä¶‚Äù)</li>
  <li>Cloud storage (e.g. Dropbox, Google Drive)</li>
  <li>Database (e.g. a PostgreSQL server)</li>
</ul>

</section>

<section>

<h2 id="link-to-the-data">Link to the Data</h2>

<p>One good practice is creating ‚Äúsymbolic links‚Äù (a.k.a. shortcuts) to data files
that live outside a project repo; these let your code use paths that point
inside the repo for data.</p>

<div class="language-r input highlighter-rouge" title="Console"><div class="highlight"><pre class="highlight"><code><span class="n">file.symlink</span><span class="p">(</span><span class="w">
  </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">...</span><span class="p">,</span><span class="w">
  </span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data'</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p class="notes">If you replace the <code class="language-plaintext highlighter-rouge">...</code> above with the path to your data, such as the location
of your Dropbox folder or network drive, the shortcut <code class="language-plaintext highlighter-rouge">data</code> works like a normal path to your data, 
as if it were inside your repo. This usually works seamlessly but could be risky on
certain operating systems or early versions (before 1.6) of <code class="language-plaintext highlighter-rouge">git</code>. It is
sometimes possible to add all your data to a commit by accident with <code class="language-plaintext highlighter-rouge">git add .</code>. 
To avoid this, it is a good idea to either update <code class="language-plaintext highlighter-rouge">git</code> or ‚Äúignore‚Äù all files 
and folders below <code class="language-plaintext highlighter-rouge">data/</code> by adding the line <code class="language-plaintext highlighter-rouge">/data/**</code> to the ‚Äú.gitignore‚Äù 
file in your repo. The leading <code class="language-plaintext highlighter-rouge">/</code> refers to the root of the git repository, 
not to the root of your filesystem.</p>
</section>

<p class="ToS"><a href="#/slides/paths">Top of Section</a></p>

<hr />
<p><a name="/slides/reproducible"></a></p>

<section><h2 id="a-plug-for-reproducibility">A Plug for Reproducibility</h2>

<p>Reproducibility is a core tenet of the scientific method.
Experiments should be reported in sufficient detail for a skilled practitioner to duplicate the result.</p>

<p class="fragment">The principle equally applies to modeling and data analysis.</p>

</section>

<section>

<h3 id="hallmarks-of-reproducibility">Hallmarks of Reproducibility</h3>

<table>
  <tbody>
    <tr>
      <td><strong>Reviewable</strong></td>
      <td>All details of the method used are easily accessible for peer review <em>and</em> community review.</td>
    </tr>
    <tr>
      <td><strong>Auditable</strong></td>
      <td>[Private] records exist to document how the methods and conclusions evolved.</td>
    </tr>
    <tr>
      <td><strong>Replicable</strong></td>
      <td>Given sufficient resources, a skilled practitioner could duplicate the research without any guesswork.</td>
    </tr>
    <tr>
      <td><strong>Open</strong></td>
      <td>The orginator grants permissions for reuse and extension of the research products.</td>
    </tr>
  </tbody>
</table>

<p class="notes">This table is adapted from ‚ÄúBest practices for computational science: Software infrastructure and environments for reproducible and extensible research‚Äù by V. Stodden and S. Miguez (<a href="https://dx.doi.org/10.2139/ssrn.2322276">2013</a>).</p>

</section>

<section>

<h3 id="habits-to-cultivate">Habits to Cultivate</h3>

<table>
  <tbody>
    <tr>
      <td><strong>Reviewable</strong></td>
      <td>Thoroughly comment scripts and share continuously with collaborators</td>
    </tr>
    <tr>
      <td><strong>Auditable</strong></td>
      <td>Maintain project history to correct mistakes when necessary</td>
    </tr>
    <tr>
      <td><strong>Replicable</strong></td>
      <td>Provide ‚Äúone-click‚Äù file &amp; data sharing of a streamlined analysis ‚Äúpipeline‚Äù</td>
    </tr>
    <tr>
      <td><strong>Open</strong></td>
      <td>Publically release on GitHub (or similar) with (implied) open licensing</td>
    </tr>
  </tbody>
</table>

<p class="notes">Learning to use git will take care of much of the work needed to make your
research reproducible. Once you become efficient at staging, commiting, pushing
and pulling, it will become the natural way to communicate with your collleagues
through collaborative development of an analysis pipeline.</p>
</section>

<p class="ToS"><a href="#/slides/reproducible">Top of Section</a></p>

<hr />
<p><a name="/slides/conclude"></a></p>

<section><h2 id="future-directions">Future Directions</h2>

<ul>
  <li>Learn more git: merge conflicts, reversion, and branching!</li>
  <li class="fragment">Share your work for reuse and extension.</li>
  <li class="fragment">Make trying new analysis as easy as branching.</li>
  <li class="fragment">Contribute beyond your own projects.</li>
</ul>

<p class="notes">The repository you created is an example of the heart of a distributed workflow. Putting the <strong>origin</strong> of your project on GitHub (or similar) will make it accessible not only by your collaborators, but also available for review and extension by your research community.</p>

<p class="notes">Using advanced <code class="language-plaintext highlighter-rouge">git</code> to manage contributions to the project as a branching and merging ‚Äútree‚Äù of commits accomplishes two objectives. First, work can safely proceed in parallel, on separate branches if necessary. Second, a recoverable (and auditable) trail of changes is immediately available in the project history.</p>

<p class="notes">The latest software for modeling and analysis in your research field may already
be on git. Build better pipelines by contributing bug reports or even pull
requests to projects integral to your own work.</p>

<p class="notes">You might find GitLab‚Äôs <a href="https://about.gitlab.com/images/press/git-cheat-sheet.pdf">git cheatsheet</a> helpful!</p>
</section>

<p class="ToS"><a href="#/slides/conclude">Top of Section</a></p>

<hr />
<p><a name="/slides/exercises"></a></p>

<section><h2 id="exercises">Exercises</h2>

<h3 id="exercise-1">Exercise 1</h3>

<p>Make the remaining worksheets show up in your ‚Äúhandouts‚Äù repository on GitHub. Remember
the three steps: stage, commit, and push.</p>

<h3 id="exercise-2">Exercise 2</h3>

<p>Repeat the steps you walked through in pairs, as an <strong>Owner</strong> and <strong>Collaborator</strong>,
but reverse the roles.</p>
</section>

<p class="ToS"><a href="#/slides/exercises">Top of Section</a></p>



        <hr>

<p>If you need to catch-up before a section of code will work, just squish it's
üçÖ to copy code above it into your clipboard. Then paste into your interpreter's
console, run, and you'll be ready to start in on that section. Code copied by
both üçÖ and üìã will also appear below, where you can edit first, and then copy,
paste, and run again.</p>

<div class="output">
  <pre id="ketchup" contenteditable="true"><code># Nothing here yet!</code></pre>
</div>

<script>
$(document).ready(function(){
  
  // Add code help icons to code blocks
  $('.input, .text-document').append('<ul class="code-help">');
  $('.code-help')
    .append('<li class="clipboard">üìã</li>');
  $('.text-document:not(.no-eval) .code-help')
    .append('<li class="ketchup">üçÖ</li>');

  // Bind copy actions to mouse clicks on icons
  var $ketchup = $('#ketchup');
  var rng = document.createRange();
  var sel = window.getSelection();
  $('.ketchup').click(function(){
    var $prev = $(this)
      .parents('.text-document')
      .prevAll('.text-document:has(.ketchup)');
    $ketchup.find('code').text($prev.find('pre').text());
    rng.selectNodeContents($ketchup[0]);
    sel.removeAllRanges();
    sel.addRange(rng);
    document.execCommand("copy");
    sel.removeAllRanges();
  });
  $('.text-document .clipboard').click(function(){
    var pre = $(this).parents('.text-document').find('pre').text();
    $ketchup.find('code').text(pre);
    rng.selectNodeContents($ketchup[0]);
    sel.removeAllRanges();
    sel.addRange(rng);
    document.execCommand("copy");
    sel.removeAllRanges();
  });
  $('.input .clipboard').click(function(){
    var pre = $(this).parents('.input').find('pre').text();
    pre = pre.replace(/(^|\n)[>+] /g, '$1');
    $ketchup.find('code').text(pre);
    rng.selectNodeContents($ketchup[0]);
    sel.removeAllRanges();
    sel.addRange(rng);
    document.execCommand("copy");
    sel.removeAllRanges();
  });
});
</script>
      </div>
    </div>
    <script>
$(document).ready(function(){
  // Add links to R and Python package repositories
  $('a.rlib').map(function(){
    this.href = 'https://cran.r-project.org/package=' + this.innerText;
  });
  $('a.pylib').map(function(){
    this.href = 'https://pypi.python.org/pypi/' + this.innerText;
  });
});
</script>

  </body>
</html>
